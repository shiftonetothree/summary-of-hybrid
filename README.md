# Hybrid 总结

## 结论
目前Hybrid功能理论上满足现有一切需求，实际上有需要但还未实践成功的功能有
1. 消息推送
2. 录短视频

## 功能支持情况
| 实践过 | 功能  | H5+支持 |
| --- | --- | --- |
| ✅ | 微信小程序 | ⚠️少数页面 |
| ✅ | iOS | ✅ |
| ✅ | Android | ✅ |
| ✅ | 图表 | ✅ |
| ✅ | 定位 | ✅ |
| ❌ | 后台定位 | ✅ |
| ✅ | 地图 | ✅ |
| ❌ | 拍照 | ✅ |
| ❌ | 拍二维码 | ✅ |
| ✅ | 实时语音识别 | ✅ |
| ✅ | 录音 | ✅ |
| ✅ | 录像 | ✅ |
| ❌ | 录短视频 | ✅ |
| ✅ | 相册 | ✅ |
| ❌ | 视频压缩 | ✅ |
| ❌ | 图片压缩 | ✅ |
| ❌ | 音频压缩 | ✅ |
| ❌ | zip | ✅ |
| ✅ | 显示二维码 | ✅ |
| ✅ | 播放直播 | ✅ |
| ✅ | 音频回放 | ✅ |
| ❌ | 后台音频回放 | ✅ |
| ✅ | 视频回放 | ✅ |
| ✅ | 动态权限 | ✅ |
| ❌ | 消息推送 | ✅ |
| ✅ | 拨打电话 | ✅ |
| ❌ | 支付 | ✅ |
| ❌ | 分享 | ✅ |
| ❌ | 指纹识别 | ⚠️安卓 |
| ❌ | 蓝牙 | ⚠️低功耗 |
| ❌ | 联系人 | ✅ |
| ❌ | 加速计 | ✅ |

## 现在使用的方案
使用的wap2app，与H5+一样

## 开发步骤
> https://ask.dcloud.net.cn/docs/#//ask.dcloud.net.cn/article/13425
1. 使用React开发完项目
2. 下载HbuilderX
3. 新建wap2app项目
4. 配置权限
5. 配置图标
6. 配置返回键功能
7. 在web项目中添加动态申请权限的代码
8. 使用云打包

## 踩过的坑
1. 自己研发的原生壳没法申请动态权限
2. 自己研发的原生壳偶尔mapbox不正常，需要在在web页加载完成后从原生端再次刷新web页
3. 华为收集无法通过ADB安装H5+的基座程序，需要将基座安装包复制到手机中手动安装
4. antd-mobile的下拉加载有时不能触发，马俊峰已经解决并发布的修复包